<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Enhancement to 4K</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        #uploaded-image {
            max-width: 100%;
            max-height: 400px;
            margin: 20px;
        }
        #output-image {
            margin-top: 20px;
        }
        input[type="file"] {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Enhance Your Image to 4K Resolution</h1>
    <input type="file" id="imageInput" accept="image/*">
    <div id="uploadedImageContainer">
        <img id="uploaded-image" src="" alt="Uploaded Image" style="display:none;">
    </div>
    <button id="enhanceBtn" onclick="enhanceImage()">Enhance to 4K</button>

    <h3>Enhanced Image (4K Resolution)</h3>
    <div id="output-image">
        <img id="enhanced-image" src="" alt="Enhanced Image" style="display:none;">
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        // Getting DOM elements
const imageInput = document.getElementById('imageInput');
const uploadedImage = document.getElementById('uploaded-image');
const enhanceBtn = document.getElementById('enhanceBtn');
const enhancedImage = document.getElementById('enhanced-image');

// When a user uploads an image
imageInput.addEventListener('change', function (event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
            uploadedImage.src = e.target.result;
            uploadedImage.style.display = "block";
        };
        reader.readAsDataURL(file);
    }
});

// Function to enhance image
function enhanceImage() {
    const file = imageInput.files[0];
    if (!file) {
        alert('Please upload an image first!');
        return;
    }

    // Form data for sending the image to the server
    const formData = new FormData();
    formData.append("image", file);

    // API call to server to enhance the image
    axios.post('http://localhost:3000/enhance', formData, {
        headers: {
            'Content-Type': 'multipart/form-data',
        },
    })
    .then(response => {
        // Assuming the response contains the URL for the enhanced 4K image
        const enhancedImageUrl = response.data.enhanced_image_url;
        enhancedImage.src = enhancedImageUrl;
        enhancedImage.style.display = "block";
    })
    .catch(error => {
        console.error('Error enhancing image:', error);
        alert('There was an error enhancing the image.');
    });
}

    </script>
    <script>
        const express = require('express');
const multer = require('multer');
const axios = require('axios');
const fs = require('fs');
const path = require('path');

const app = express();
const port = 3000;

// Configure multer for file uploads
const storage = multer.diskStorage({
    destination: (req, file, cb) => {
        cb(null, 'uploads/');
    },
    filename: (req, file, cb) => {
        cb(null, Date.now() + path.extname(file.originalname));
    },
});

const upload = multer({ storage });

// API endpoint for enhancing image
app.post('/enhance', upload.single('image'), async (req, res) => {
    const imagePath = req.file.path;

    try {
        // Mock API call to enhance the image (replace this with a real API like DeepAI or Waifu2x)
        const response = await axios.post('https://api.deepai.org/api/waifu2x', {
            image: fs.createReadStream(imagePath),
        }, {
            headers: { 'api-key': 'your-api-key' },
        });

        // Send back the enhanced image URL
        res.json({
            enhanced_image_url: response.data.output_url
        });

        // Clean up uploaded file
        fs.unlinkSync(imagePath);

    } catch (error) {
        console.error('Error enhancing image:', error);
        res.status(500).send('Error processing image.');
    }
});

// Start server
app.listen(port, () => {
    console.log(`Server running at http://localhost:${port}`);
});

    </script>
</body>
</html>
